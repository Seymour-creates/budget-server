<!DOCTYPE html>
<html>
<head>
    <title>Plaid Link Demo</title>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <script src="https://unpkg.com/htmx.org"></script>
</head>
<body>
<button id="link-button">Connect with Plaid</button>
<form hx-post="/your-endpoint" hx-swap="outerHTML" id="plaid-form">
    <input type="hidden" name="public_token" id="public-token">
</form>
<script type="text/javascript">
    var linkHandler = Plaid.create({
        token: '{{.LinkToken}}', // Replace with the link token from your server
        onSuccess: function(public_token, metadata) {
            // Set the public_token in the form
            document.getElementById('public-token').value = public_token;
            // Submit the form with HTMX
            document.getElementById('plaid-form').submit();
        },
        onExit: function(err, metadata) {
            // Handle the error or the exit event
        }
    });

    document.getElementById('link-button').onclick = function() {
        linkHandler.open();
    };
</script>
</body>
</html>